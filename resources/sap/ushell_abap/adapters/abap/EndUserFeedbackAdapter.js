// Copyright (c) 2009-2014 SAP SE, All Rights Reserved
(function(){"use strict";jQuery.sap.declare("sap.ushell_abap.adapters.abap.EndUserFeedbackAdapter");jQuery.sap.require("sap.ui2.srvc.ODataWrapper");jQuery.sap.require("sap.ui2.srvc.ODataService");sap.ushell_abap.adapters.abap.EndUserFeedbackAdapter=function(s){var o=sap.ui2.srvc.createODataWrapper("/sap/opu/odata/UI2/INTEROP/"),l=false,L="";this.sendFeedback=function(e){var d,r="FeedbackHeaders",E={isAnonymous:e.isAnonymous,feedbackText:e.feedbackText,applicationType:e.applicationType||"<undefined>",additionalInformation:e.additionalInformation,url:e.url,navigationIntent:e.navigationIntent,formFactor:e.formFactor,eMail:e.eMail,userId:e.userId,Ratings:e.ratings};d=new jQuery.Deferred();sap.ui2.srvc.ODataService.call(this,o,function(){return false;});o.create(r,E,function(a){d.resolve(a.feedbackCount);},function(a){d.reject(a);});return d.promise();};this.getLegalText=function(){var d,r="FeedbackLegalTexts('1')";d=new jQuery.Deferred();if(l){sap.ui2.srvc.call(function(a){d.resolve(L);});return d.promise();}sap.ui2.srvc.ODataService.call(this,o,function(){return false;});o.read(r,function(a){L=a.legalText;l=true;d.resolve(a.legalText);},function(e){d.reject(e);});return d.promise();};this.isEnabled=function(){var d=new jQuery.Deferred(),a=this.getLegalText();a.done(function(L){if(L){d.resolve();}else{d.reject();}});a.fail(function(e){d.reject();});return d.promise();};};}());
