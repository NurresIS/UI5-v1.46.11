sap.ui.define(["jquery.sap.global","sap/ui/base/Object"],function(q,B){"use strict";var C={};function g(c,o){var h;var H=null;var a;var b;var I=false;var e=[];function d(i){var J;var M=c.getModel();if(i){if(M){J=M.getProperty(i);}}else{var K=c.getBindingContext();if(K){J=K.getObject();}}return!!(J&&J.__metadata&&J.__metadata.created);}function f(){return c.getModel("_templPriv");}function j(){return f().getProperty("/generic/viewLevel");}function k(){return o.preprocessorsData;}function l(){var i=c.getModel("i18n").getResourceBundle();return{dataLoadFailedTitle:i.getText("ST_GENERIC_ERROR_LOAD_DATA_TITLE"),dataLoadFailedText:i.getText("ST_GENERIC_ERROR_LOAD_DATA_TEXT")};}function A(T,i,J){if(typeof J!=="function"){throw new Error("Event handler must be a function");}e.push({template:T,event:i,handler:J});}function D(T,J,K){for(var i=e.length;i--;){if(e[i].handler===K&&e[i].event===J&&e[i].template===T){e.splice(i,1);}}}function F(T,J,K){for(var i=0;i<e.length;i++){if(e[i].event===J&&e[i].template===T){e[i].handler(K);}}}function m(i){return i.getMetadata().getName();}function p(i){h.then(function(J){if(J&&!i.outdated){var N=o.oNavigationObserver.getProcessFinished(true);N.then(function(){F(m(o.oController),"PageDataLoaded",{context:J});});}});}function s(){o.oHeaderLoadingObserver.startProcess();if(!b){var i=new Promise(function(J){b=J;});o.oApplication.getBusyHelper().setBusy(i);}}function n(){I=true;if(!H){h=new Promise(function(i){H=i;});}if(!c.getComponentContainer().getElementBinding().isSuspended()){s();}}function E(){if(b){b();b=null;}o.oHeaderLoadingObserver.stopProcess();}function r(i){return i.getSource().getBoundContext()||C;}function t(){if(!a||c.getComponentContainer().getElementBinding().isSuspended()){return;}if(a===C){var i=l();var N=c.getAppComponent().getNavigationController();N.navigateToMessagePage({title:i.dataLoadFailedTitle,text:i.dataLoadFailedText,viewLevel:j()});}else{if(H){H(a);}(o.methods.updateBindingContext||q.noop)();}H=null;a=null;}function u(i){E();t();I=false;}function v(i){a=r(i);t();o.oHeaderLoadingObserver.stopProcess();}function R(i){var P={};var J=k();if(J.rootContextExpand&&J.rootContextExpand.length){P.expand=J.rootContextExpand.join(",");}o.oHeaderLoadingObserver.startProcess();h=new Promise(function(K){a=null;H=K;c.getComponentContainer().bindElement({path:i,events:{dataRequested:n,dataReceived:u,change:v},parameters:P,batchGroupId:"Changes",changeSetId:"Changes"});});}function U(){var i=c.getComponentContainer();i.unbindElement();a=null;}function w(i,J){if(!i){return;}var K=c.getComponentContainer();if(!K){return;}if(d(i)){U();K.setBindingContext(K.getModel().getContext(i));}else{var L=o.oApplication.getCurrentDisplayObject();var M=K.getElementBinding();if(M){if(M.getPath()===i){if(M.isSuspended()){M.resume();t();}if(I){s();}if(!J){p(L);}return;}else if(!J){U();}}var N=c.getModel("ui");N.setProperty("/enabled",false);N.setProperty("/editable",false);R(i);p(L);}}function S(){var i=c.getComponentContainer();var J=i.getElementBinding();if(J&&!J.isSuspended()){J.suspend();E();}}function x(i){o.oApplication.setBackNavigation(i);}function y(T){o.oApplication.setTitle(T);}function z(i){return o.oApplication.registerContext(i);}function G(){return o.oApplication.getBreadCrumbInfo(c.getEntitySet());}return{setEditableNDC:function(i){o.oApplication.setEditableNDC(i);},getEditableNDC:function(){return o.oApplication.getEditableNDC();},getBusyHelper:function(){return o.oApplication.getBusyHelper();},isNonDraftCreate:d,attach:function(i,J,K){A(m(i),J,K);},detach:function(i,J,K){D(m(i),J,K);},fire:function(i,J,K){F(m(i),J,K);},getCurrentDisplayObject:function(){return o.oApplication.getCurrentDisplayObject();},getPreprocessorsData:k,bindComponent:w,suspendBinding:S,setBackNavigation:x,setTitle:y,getTemplatePrivateModel:f,registerContext:z,getViewLevel:j,getBreadCrumbInfo:G};}return B.extend("sap.suite.ui.generic.template.lib.ComponentUtils.js",{constructor:function(c,o){q.extend(this,g(c,o));}});});
