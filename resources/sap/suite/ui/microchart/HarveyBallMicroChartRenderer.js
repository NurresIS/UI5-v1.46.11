/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2017 SAP SE. All rights reserved
 */
sap.ui.define(['sap/m/ValueCSSColor','sap/ui/Device'],function(V,D){"use strict";var H={};H._iReferenceControlHeight=72;H._iReferenceControlWidth=168;H.render=function(r,c){if(!c._bThemeApplied){return;}this._calculatePath(c);var C=c.getColorPalette();var R=sap.ui.getCore().getConfiguration().getRTL();var a=c.getAltText();var t="";var v="";var s="";var f=false;var b=0;var d="";var e=C.length>0?C[0]:null;if(V.isValid(e)){e=jQuery.sap.encodeHTML(C[0]);}else{e=null;}if(c.getItems().length){var p=c.getItems()[0];b=p.getFraction();d="sapSuiteHBMCSemanticColor"+jQuery.sap.encodeHTML(p.getColor());v=p.getFractionLabel()?p.getFractionLabel():v+p.getFraction();s=p.getFractionScale()?p.getFractionScale().substring(0,3):s;f=p.getFormattedLabel();}if(f){var F=c._parseFormattedValue(v);s=F.scale.substring(0,3);v=F.value;}var T=c.getTotal();var g=c.getTotalLabel()?c.getTotalLabel():""+c.getTotal();if(c.getTotalScale()){t=c.getTotalScale().substring(0,3);}if(c.getFormattedLabel()){var o=c._parseFormattedValue(g);t=o.scale.substring(0,3);g=o.value;}var i=5;if(v){v=(v.length>=i&&(v[i-1]==="."||v[i-1]===","))?v.substring(0,i-1):v.substring(0,i);}if(g){g=(g.length>=i&&(g[i-1]==="."||g[i-1]===","))?g.substring(0,i-1):g.substring(0,i);}var S="sapSuiteHBMCSize"+c.getSize();r.write("<div");r.writeControlData(c);r.writeAttribute("role","presentation");r.writeAttributeEscaped("aria-label",a);r.addClass("sapSuiteHBMC");r.addClass(c.getIsResponsive()?"sapSuiteHBMCResponsive":jQuery.sap.encodeHTML(S));if(c.hasListeners("press")){r.addClass("sapSuiteUiMicroChartPointer");r.writeAttribute("tabindex","0");}r.writeClasses();if(!c.getIsResponsive()&&c.getWidth()){r.addStyle("width",c.getWidth());}r.writeStyles();r.write(">");r.write("<div");r.addClass("sapSuiteHBMCChartCnt");r.addClass(c.getIsResponsive()?"sapSuiteHBMCResponsive":jQuery.sap.encodeHTML(S));r.writeClasses();r.addStyle("display","inline-block");r.writeStyles();r.write(">");r.write("<svg");r.writeAttribute("id",c.getId()+"-harvey-ball");if(c.getIsResponsive()){r.addClass("sapSuiteHBMCChartCnt");r.addClass("sapSuiteHBMCResponsive");r.writeClasses();r.writeAttributeEscaped("viewBox",this._getSvgViewBoxProperties());}else{r.writeAttributeEscaped("width",this._oPath.size);r.writeAttributeEscaped("height",this._oPath.size);}r.writeAttribute("focusable",false);r.write(">");r.write("<g>");r.write("<circle");if(R&&c.getIsResponsive()){r.writeAttributeEscaped("cx",H._iReferenceControlWidth-this._oPath.center);}else{r.writeAttributeEscaped("cx",this._oPath.center);}r.writeAttributeEscaped("cy",this._oPath.center);r.writeAttributeEscaped("r",(sap.ui.getCore().getConfiguration().getTheme()==="sap_hcb")?this._oPath.center-1:this._oPath.center);r.addClass("sapSuiteHBMCSBall");r.writeClasses();r.write("/>");if(b&&b>=T){r.write("<circle");if(R&&c.getIsResponsive()){r.writeAttributeEscaped("cx",H._iReferenceControlWidth-this._oPath.center);}else{r.writeAttributeEscaped("cx",this._oPath.center);}r.writeAttributeEscaped("cy",this._oPath.center);r.writeAttributeEscaped("r",this._oPath.center-this._oPath.border);r.addClass("sapSuiteHBMCSgmnt");if(e){r.addStyle("fill",e);r.writeStyles();}else{r.addClass(d);}r.writeClasses();r.write("/>");}else if(b>0){r.write("<path");r.writeAttribute("id",c.getId()+"-segment");r.addClass("sapSuiteHBMCSgmnt");if(e){r.addStyle("fill",e);r.writeStyles();}else{r.addClass(d);}r.writeClasses();r.writeAttributeEscaped("d",this._serializePieChart());r.write("/>");}r.write("</g>");if(c.getIsResponsive()){if(c.getShowFractions()){r.write("<text");r.writeAttribute("id","sapSuiteHBMCTopText");if(R&&(D.browser.msie||D.browser.edge)){r.writeAttribute("text-anchor","end");}else{r.writeAttribute("text-anchor","start");}r.writeAttribute("x","80");r.writeAttribute("y","30");r.addClass("sapSuiteHBMCResponsive");r.addClass("sapSuiteHBMCValSclCnt");if(!e){r.addClass(d);}r.writeClasses();r.write(">");if(!R){this.renderFractionLabel(r,v,e,R);this.renderFractionScale(r,s,e,R);}else{this.renderFractionScale(r,s,e,R);this.renderFractionLabel(r,v,e,R);}r.write("</text>");}if(c.getShowTotal()){r.write("<text");r.writeAttribute("id","sapSuiteHBMCBottomText");if(!R){r.writeAttributeEscaped("x",H._iReferenceControlWidth);}else{r.writeAttribute("x","0");}r.writeAttribute("y","65");if(R&&(D.browser.msie||D.browser.edge)){r.writeAttribute("text-anchor","start");}else{r.writeAttribute("text-anchor","end");}r.addClass("sapSuiteHBMCResponsive");r.addClass("sapSuiteHBMCTtl");r.addClass("sapSuiteHBMCTtlSclCnt");r.writeClasses();r.write(">");if(!R){this.renderTotalLabel(r,g,R);this.renderTotalScale(r,t,R);}else{this.renderTotalScale(r,t,R);this.renderTotalLabel(r,g,R);}r.write("</text>");}}r.write("</svg>");r.write("</div>");if(!c.getIsResponsive()){r.write("<div");r.addClass("sapSuiteHBMCValSclCnt");r.addClass(jQuery.sap.encodeHTML(S));r.writeClasses();r.addStyle("display",c.getShowFractions()?"inline-block":"none");r.writeStyles();r.write(">");r.write("<p");r.write(">");this.renderLabel(r,c,[d,S,"sapSuiteHBMCVal"],v,e,"-fraction");this.renderLabel(r,c,[d,S,"sapSuiteHBMCValScale"],s,e,"-fraction-scale");r.write("</p>");r.write("</div>");r.write("<div");r.addClass("sapSuiteHBMCTtlSclCnt");r.addClass(jQuery.sap.encodeHTML(S));r.writeClasses();if(R){r.addStyle("left","0");}else{r.addStyle("right","0");}r.addStyle("display",c.getShowTotal()?"inline-block":"none");r.writeStyles();r.write(">");this.renderLabel(r,c,[d,S,"sapSuiteHBMCTtl"],g,e,"-total");this.renderLabel(r,c,[d,S,"sapSuiteHBMCTtlScale"],t,e,"-total-scale");r.write("</div>");}r.write("</div>");};H.renderFractionLabel=function(r,f,c,R){r.write("<tspan");if(R){r.writeAttribute("dx","4.8px");}if(c){r.addStyle("fill",c);r.writeStyles();}r.write(">");r.writeEscaped(f);r.write("</tspan>");};H.renderFractionScale=function(r,f,c,R){r.write("<tspan");r.writeAttribute("font-size","0.8rem");if(!R){r.writeAttribute("dx","4.8px");}if(c){r.addStyle("fill",c);r.writeStyles();}r.write(">");r.writeEscaped(f);r.write("</tspan>");};H.renderTotalLabel=function(r,t,R){r.write("<tspan");if(R){r.writeAttribute("dx","4.8px");}else if(D.browser.msie||D.browser.edge){r.writeAttribute("dx","-4.8px");}r.write(">");r.writeEscaped(t);r.write("</tspan>");};H.renderTotalScale=function(r,t,R){r.write("<tspan");if(!R){r.writeAttribute("dx","4.8px");}r.write(">");r.writeEscaped(t);r.write("</tspan>");};H.renderLabel=function(r,c,C,l,s,I){var u=!(C.indexOf("sapSuiteHBMCTtl")>-1||C.indexOf("sapSuiteHBMCTtlScale")>-1);r.write("<span");r.writeAttribute("id",c.getId()+I);for(var i=0;i<C.length;i++){if(i===0&&s&&u){r.addStyle("color",s);r.writeStyles();}else{r.addClass(jQuery.sap.encodeHTML(C[i]));}}r.writeClasses();r.write(">");if(l){r.writeEscaped(l);}r.write("</span>");};H._getSvgViewBoxProperties=function(){return"0 0 "+H._iReferenceControlWidth+" "+H._iReferenceControlHeight;};H._calculatePath=function(c){var s=c.getSize();var t=c.getTotal();var f=0;if(c.getItems().length){f=c.getItems()[0].getFraction();}var i=false;if(s=="Auto"){i=jQuery("html").hasClass("sapUiMedia-Std-Phone");}if(s=="S"||s=="XS"){i=true;}var m=i?56:72;if(c.getIsResponsive()){m=H._iReferenceControlHeight;}var C=m/2;var b=4;var r=sap.ui.getCore().getConfiguration().getRTL();var R;if(c.getIsResponsive()&&r){R=true;}else{R=false;}this._oPath={initial:{x:!R?C:H._iReferenceControlWidth-C,y:C,x1:!R?C:H._iReferenceControlWidth-C,y1:C},lineTo:{x:!R?C:H._iReferenceControlWidth-C,y:b},arc:{x1:C-b,y1:C-b,xArc:0,largeArc:0,sweep:1,x2:"",y2:""},size:m,border:b,center:C};var a=f/t*360;if(a<10){this._oPath.initial.x-=1.5;this._oPath.initial.x1+=1.5;this._oPath.arc.x2=this._oPath.initial.x1;this._oPath.arc.y2=this._oPath.lineTo.y;}else if(a>350&&a<360){this._oPath.initial.x+=1.5;this._oPath.initial.x1-=1.5;this._oPath.arc.x2=this._oPath.initial.x1;this._oPath.arc.y2=this._oPath.lineTo.y;}else{var d=Math.PI/180.0;var e=this._oPath.center-this._oPath.border;var g;if(!R){g=e*Math.cos((a-90)*d)+this._oPath.center;}else{g=e*Math.cos((a-90)*d)+H._iReferenceControlWidth-this._oPath.center;}var h=this._oPath.size-(e*Math.sin((a+90)*d)+this._oPath.center);this._oPath.arc.x2=g.toFixed(2);this._oPath.arc.y2=h.toFixed(2);}var l=t/f<2?1:0;this._oPath.arc.largeArc=l;};H._serializePieChart=function(){var p=this._oPath;return["M",p.initial.x,",",p.initial.y," L",p.initial.x,",",p.lineTo.y," A",p.arc.x1,",",p.arc.y1," ",p.arc.xArc," ",p.arc.largeArc,",",p.arc.sweep," ",p.arc.x2,",",p.arc.y2," L",p.initial.x1,",",p.initial.y1," z"].join("");};return H;},true);
