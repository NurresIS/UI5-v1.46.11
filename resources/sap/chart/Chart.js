/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2017 SAP SE. All rights reserved
 */
sap.ui.define(['sap/chart/library','sap/viz/ui5/controls/VizFrame','sap/viz/ui5/controls/common/BaseControl','sap/viz/ui5/data/Dataset','sap/viz/ui5/data/FlattenedDataset','sap/viz/ui5/data/DimensionDefinition','sap/viz/ui5/data/MeasureDefinition','sap/chart/data/Dimension','sap/chart/data/TimeDimension','sap/chart/data/Measure','sap/ui/model/analytics/ODataModelAdapter','sap/chart/utils/RoleFitter','sap/chart/utils/ChartUtils','sap/chart/utils/ChartTypeAdapterUtils','sap/chart/utils/DateFormatUtil','sap/chart/utils/DataSourceUtils','sap/chart/utils/SelectionAPIUtils','sap/chart/utils/MeasureSemantics','sap/viz/ui5/controls/common/feeds/FeedItem','sap/ui/model/Filter','sap/ui/model/FilterOperator','sap/ui/model/analytics/odata4analytics','sap/chart/TimeUnitType','sap/chart/coloring/Colorings','sap/chart/ChartLog','sap/chart/pagination/PagingController'],function(l,V,B,D,F,a,M,b,T,c,O,R,C,f,g,h,S,n,q,r,s,t,u,w,x,P){"use strict";var y=sap.chart.SelectionMode;var z=B.extend("sap.chart.Chart",{metadata:{library:"sap.chart",properties:{chartType:{type:"string",defaultValue:"bar"},uiConfig:{type:"object",group:"Misc"},visibleDimensions:{type:"string[]",defaultValue:[]},inResultDimensions:{type:"string[]",defaultValue:[]},visibleMeasures:{type:"string[]",defaultValue:[]},vizProperties:{type:"object",group:"Misc"},vizScales:{type:"object[]",group:"Misc"},isAnalytical:{type:"boolean"},selectionBehavior:{type:"sap.chart.SelectionBehavior",defaultValue:sap.chart.SelectionBehavior.DataPoint},selectionMode:{type:"sap.chart.SelectionMode",defaultValue:sap.chart.SelectionMode.Multi},enablePagination:{type:"boolean",defaultValue:false},customMessages:{type:"object",defaultValue:null},colorings:{type:"object",defaultValue:null},activeColoring:{type:"object",defaultValue:null}},aggregations:{data:{type:"sap.ui.core.Element",multiple:true,bindable:"bindable"},_vizFrame:{type:"sap.viz.ui5.controls.VizFrame",multiple:false,visibility:"hidden"},dimensions:{type:"sap.chart.data.Dimension",multiple:true},measures:{type:"sap.chart.data.Measure",multiple:true}},events:{drilledDown:{parameters:{dimensions:{type:"string[]"}}},drilledUp:{parameters:{dimensions:{type:"string[]"}}},renderComplete:{},selectData:{},deselectData:{}}},renderer:function(o,d){o.write("<div");o.writeControlData(d);o.addStyle("width",d.getWidth());o.addStyle("height",d.getHeight());o.writeStyles();o.write(">");o.renderControl(d.getAggregation("_vizFrame"));o.write("</div>");}});z.getMetadata().getAggregation("data")._doesNotRequireFactory=true;function A(v){return v.indexOf("%")!==-1?"100%":v;}z.prototype.setHeight=function(v){this.setProperty("height",v);var o=this._getVizFrame();if(o){o.setHeight(A(this.getProperty("height")));}return this;};z.prototype.setWidth=function(v){this.setProperty("width",v);var o=this._getVizFrame();if(o){o.setWidth(A(this.getProperty("width")));}return this;};z.prototype.setChartType=function(d,e){this.setProperty("chartType",d,e);this._bIsPagingChartType=C.CONFIG.pagingChartTypes.indexOf(d)>-1;if(this._isEnablePaging()){this._getPagingController().init(false);}else{var o=this._getDataset();if(o){o.setPagingOption(null);o.setRange(-1,-1);}}this._invalidateBy({source:this,keys:{vizFrame:true}});this._bNeedToApplyDefaultProperties=true;return this;};z.prototype.setColorings=function(v){this.setProperty("colorings",v);this._invalidateBy({source:this,keys:{vizFrame:true,checkBinding:true}});return this;};z.prototype.setActiveColoring=function(v){this.setProperty("activeColoring",v);this._invalidateBy({source:this,keys:{vizFrame:true,checkBinding:true}});return this;};z.prototype.removeDimension=function(d){var v=this._getVisibleDimensions()||[];var i;if(this.getIsAnalytical()===false&&d&&d.getName()){i=v.indexOf(d.getName());if(i!==-1){jQuery.sap.log.error('Data source does not support aggregation. The method "removeDimension" therefore cannot be used!');return;}}var o=this.removeAggregation("dimensions",d);if(o){i=v.indexOf(o.getName());if(i!==-1){v.splice(i,1);this.setVisibleDimensions(v);}var e=this.getInResultDimensions()||[];i=e.indexOf(o.getName());if(i!==-1){e.splice(i,1);this.setInResultDimensions(e);}}return o;};z.prototype.removeAllDimensions=function(){var o;if(this.getIsAnalytical()===false){jQuery.sap.log.error('Data source does not support aggregation. The method "removeAllDimensions" therefore cannot be used!');}else{o=this.removeAllAggregation("dimensions");this.setVisibleDimensions([]);this.setInResultDimensions([]);}return o;};z.prototype.destroyDimensions=function(){var o;if(this.getIsAnalytical()===false){jQuery.sap.log.error('Data source does not support aggregation. The method "destroyDimensions" therefore cannot be used!');}else{o=this.destroyAggregation("dimensions");this.setVisibleDimensions([]);this.setInResultDimensions([]);}return o;};z.prototype.removeMeasure=function(m){var o=this.removeAggregation("measures",m);if(o){var v=this._getVisibleMeasures()||[],i=v.indexOf(o.getName());if(i!==-1){v.splice(i,1);this.setVisibleMeasures(v);}}return o;};z.prototype.removeAllMeasures=function(){var o=this.removeAllAggregation("measures");this.setVisibleMeasures([]);return o;};z.prototype.destroyMeasures=function(){var o=this.destroyAggregation("measures");this.setVisibleMeasures([]);return o;};z.prototype._getVisibleDimensions=function(N){var o=this._getDrillStateTop();var d=o?o.dimensions:this.getProperty("visibleDimensions");return N?this._normalizeDorM(d,true):d;};z.prototype.getVisibleDimensions=function(){var v=this._getVisibleDimensions();return this._aFeeds?v.filter(function(d){return this._aFeeds._unused.indexOf(d)===-1;},this):v;};z.prototype._getVisibleMeasures=function(N){var o=this._getDrillStateTop();var m=o?o.measures:this.getProperty("visibleMeasures");return N?this._normalizeDorM(m):m;};z.prototype.getVisibleMeasures=function(){var v=this._getVisibleMeasures();return this._aFeeds?v.filter(function(d){return this._aFeeds._unused.indexOf(d)===-1;},this):v;};z.prototype.setVisibleDimensions=function(v,d){var m=this._dimensionSanityCheck({visible:v});this.setProperty("visibleDimensions",v,d);this.setProperty("inResultDimensions",m.inResult,d);this._createDrillStack();this._invalidateBy({source:this,keys:{binding:true,dataSet:true,vizFrame:true}});return this;};z.prototype.setInResultDimensions=function(i,d){var m=this._dimensionSanityCheck({inResult:i});this.setProperty("inResultDimensions",i,d);this.setProperty("visibleDimensions",m.visible,d);this._createDrillStack();this._invalidateBy({source:this,keys:{binding:true,dataSet:true,vizFrame:true}});};z.prototype.setVisibleMeasures=function(m,d){this.setProperty("visibleMeasures",m,d);this._createDrillStack();this._invalidateBy({source:this,keys:{binding:true,dataSet:true,vizFrame:true}});return this;};z.prototype.setEnablePagination=function(e,d){if(!this._bIsInitialized){this.setProperty("enablePagination",e,d);this._invalidateBy({source:this,keys:{binding:true,dataSet:true,vizFrame:true,drillStack:true}});}return this;};z.prototype._dimensionSanityCheck=function(d){var v=d.visible||this.getVisibleDimensions()||[],i=d.inResult||this.getInResultDimensions()||[];var m=[].concat(v).concat(i).reduce(function(e,j){var k=v.indexOf(j)!==-1,o=i.indexOf(j)!==-1;if(k&&o){e.common[j]=true;}else if(k){e.visible[j]=true;}else if(o){e.inResult[j]=true;}return e;},{visible:{},inResult:{},common:{}});m.visible=Object.keys(m.visible);m.inResult=Object.keys(m.inResult);m.common=Object.keys(m.common);return m;};z.prototype._prepareFeeds=function(){if(!this._aFeeds){var d=this._normalizeDorM(this._getVisibleDimensions(),true),m=this._normalizeDorM(this._getVisibleMeasures(),false),i=this._normalizeDorM(this.getInResultDimensions(),true);this._sAdapteredChartType=this.getEnablePagination()?this.getChartType():f.adaptChartType(this.getChartType(),d);this._aFeeds=R.fit(this._sAdapteredChartType,d,m,i,this._enableSemanticPattern());if((!this._aFeeds._valid||this._aFeeds._unused.length)&&this._sAdapteredChartType!==this.getChartType()){this._sAdapteredChartType=this.getChartType();this._aFeeds=R.fit(this._sAdapteredChartType,d,m,i);}if(this._sAdapteredChartType!==this.getChartType()){this._bNeedToApplyDefaultProperties=true;}}return this._aFeeds;};z.prototype._normalizeDorM=function(m,i){var d=i?this.getDimensions():this.getMeasures(),L=d.reduce(function(j,k){j[k.getName()]=k;return j;},{}),e=i?b:c;var o=m.reduce(function(o,j){var k;if(typeof j==="string"){k=j;}else if(j instanceof e){k=j.getName();}else{o.errors.push(j);}if(L[k]){o.normalized.push(L[k]);}else{o.errors.push(j);}return o;},{normalized:[],errors:[]});var N=o.normalized;if(o.errors.length>0){N.errors=o.errors;}return N;};z.prototype._redundantsFromSelection=function(){var d=this._getVizFrame().vizSelection();if(!d||d.length===0){return{measureNames:{}};}var o=this._getContinuesSemanticTuples();var m=d.reduce(function(i,j){var p=[];for(var L in o){if(o.hasOwnProperty(L)){var N=o[L];if(j.data[L]){p.push((j.data[N.timeAxis]<N.projectedValueStartTime)?N.projected:N.actual);}else{p.push(N.actual);p.push(N.projected);}}}jQuery.each(j.data,function(k,v){if(!(p.length>0&&p.indexOf(k)>-1)){if(!i[k]){i[k]=[];}if(i[k].indexOf(v)===-1){i[k].push(v);}}});return i;},{});var e=this._getVisibleDimensions().reduce(function(i,j){var v=m[j];if(v.length===1){i[j]=v[0];}return i;},{});e.measureNames=this._getVisibleMeasures().reduce(function(i,j){if(!m[j]){i[j]=true;}return i;},{});return e;};z.prototype._deriveFilterFromSelection=function(){var v=this._getVisibleDimensions();var d=this;var e=this._getVizFrame().vizSelection().map(function(o){var j=v.reduce(function(k,m){var p=d.getDimensionByName(m);var L;L=o.data[m];if(C.CONFIG.timeChartTypes.indexOf(d._sAdapteredChartType)>-1&&p instanceof T){var N=g.getInstance(p.getTimeUnit());if(N){var Q=N.format.bind(N);L=Q(new Date(o.data[m]));}}k.filters.push(new r({path:m,operator:s.EQ,value1:L}));k.signature.push(m+"="+o.data[m]);return k;},{filters:[],signature:[]});j.signature=j.signature.join(";");return j;});var U=e.reduce(function(m,o){if(!m[o.signature]&&o.filters.length>0){m[o.signature]=new r(o.filters,true);}return m;},{});var i=Object.keys(U).map(function(k){return U[k];});if(i.length>1){return new sap.ui.model.Filter(i,false);}else if(i.length===1){return i[0];}else{return null;}};z.prototype._checkDrilldownValid=function(i){var v=this._getVisibleDimensions().concat(this.getInResultDimensions()).reduce(function(e,j){e[j]=true;return e;},{});if(i.some(function(e){return v[e.getName()];})){jQuery.sap.log.error("Drill down not possible, because one of the given dimensions is already drilled down!");return false;}var m=i.reduce(function(e,j){e[j.getName()]=j;return e;},{});function d(e){if(jQuery.isArray(e.aFilters)){return e.aFilters.some(d);}else{return!!m[e.sPath];}}var o=this._getDrillStateTop();if(o&&o.filter&&d(o.filter)){jQuery.sap.log.error("Drill down not possible, because one of the given dimensions is already filtered!");return false;}return true;};z.prototype._createDrillStack=function(){var v=this.getProperty("visibleDimensions")||[],d=this.getProperty("visibleMeasures")||[],e=[{dimensions:[],measures:d,filter:undefined}],j=[];for(var i=0;i<v.length;i++){j.push(v[i]);e.push({dimensions:j.slice(),measures:d,filter:undefined});}this._drillStateStack=e;};z.prototype._invalidateBy=function(o){var d=o.source;var e=this._oCandidateColoringSetting?(this._oCandidateColoringSetting.additionalDimensions||[]):[];if(d===this){jQuery.each(o.keys||{},function(k,v){this._markForUpdate(k,v);}.bind(this));}else if(d instanceof c&&this._getVisibleMeasures().indexOf(d.getName())!==-1){this._markForUpdate("dataSet",true);this._markForUpdate("vizFrame",true);if(o.property==="unitBinding"){this._markForUpdate("binding",true);}}else if(d instanceof b&&this._getVisibleDimensions().concat(e).indexOf(d.getName())!==-1){this._markForUpdate("dataSet",true);this._markForUpdate("vizFrame",true);if(d.getDisplayText()&&(o.property==="textProperty"||o.property==="displayText")){this._markForUpdate("binding",true);}}this.invalidate(o);};z.prototype._handleNonAnalyticalFeeding=function(){var d=this;var i=this.getInResultDimensions();var v=this._getVisibleDimensions(),e=this.getDimensions().map(function(o){return o.getName();});var j=[];e.forEach(function(m){if(d.getDimensionByName(m)){var o=d.getDimensionByName(m).getTextProperty();if(o){j.push(o);}}});var k=v.concat(e.filter(function(m){return(v.indexOf(m)<0);})).filter(function(m){return(j.indexOf(m)<0)&&(i.indexOf(m)<0);});this.setProperty("visibleDimensions",k);this._createDrillStack();};z.prototype._markForUpdate=function(k,N){if(!this._mNeedToUpdate){this._mNeedToUpdate={};}this._mNeedToUpdate[k]=N;var o=this._updaters.onInvalidate[k];if(o){o.call(this);}};z.prototype._updaters=(function(){return{onInvalidate:{vizFrame:function(){this._aFeeds=null;this._bColoringParsed=null;},checkBinding:function(){this._bColoringParsed=null;},binding:function(){this._bColoringParsed=null;}},checkBinding:function(){var o=this._getCandidateColoringSetting();var d=o.additionalDimensions;var e=o.additionalMeasures;if((d&&d.length)||(e&&e.length)){this._markForUpdate("binding",true);}},drillStack:function(){this._createDrillStack();},dataSet:function(){this._getDataset().invalidate();},binding:function(){var o=this._getDataset().getBinding("data"),i=this.getInResultDimensions();if(!o){return;}var d=this._getVisibleDimensions(true).concat(this._normalizeDorM(i,true));var m=this._getVisibleMeasures(true);h.updateModel(this.getIsAnalytical())(this,d,m);var e=this._getDrillStateTop();if(d.length>0||m.length>0){this._getVizFrame()._readyToRender(false);this.setBusy(true);}o.filter((e&&e.filter)?e.filter:undefined);},vizFrame:function(){if(this._mNeedToUpdate['binding']){if(this._isEnablePaging()){this._getPagingController().reset();this._oColoringStatus={};}else{this._getDataset().setPagingOption(null);}}else{this._markForUpdate('loopData',true);}var d=this,o=this._getDataset(),v=this._getVizFrame(),m=this._isEnablePaging()?this._getPagingController().getMeasureRange():{};o.removeAllAggregation("dimensions",true);o.removeAllAggregation("measures",true);v.removeAllAggregation("feeds",true);if(this.getIsAnalytical()===false){this._handleNonAnalyticalFeeding();}var e=this._prepareFeeds();e._def.dim.forEach(function(L){o.addAggregation("dimensions",L,true);},this);e._def.msr.forEach(function(L){if(L){var N=m[L.getIdentity()];if(N){L.setRange([N.min,N.max]);}if(!d.getDimensionByName(L.getUnit())){L.setUnit(null);}o.addAggregation("measures",L,true);}},this);e.forEach(function(L){v.addFeed(L);});this._semanticTuples=e._semanticTuples;var i=e._context||[];var j=this._getCandidateColoringSetting();var k=j.additionalMeasures||[];var p=j.additionalDimensions||[];k.forEach(function(L){i.push({id:L,showInTooltip:false});o.addMeasure(new M({name:L,identity:L,value:'{'+L+'}'}));});p.forEach(function(L){i.push({id:L,showInTooltip:false});o.addDimension(new a({name:L,identity:L,value:'{'+L+'}'}));});o.setContext(i);v.invalidate();o.invalidate();v.setVizType(this._sAdapteredChartType);v.setVizProperties(this._getEffectiveProperties());v._setCustomMessages(this.getCustomMessages());},loopData:function(){var v=this._getVizFrame();try{this._prepareData();}catch(e){if(e instanceof x){e.display();}else{throw e;}}var o=this._getEffectiveProperties();this._usingDisplayNameForSemantics(o);v.setVizProperties(o);this._setEffectiveScales();}};})();z.prototype._getDrillStateTop=function(){return this._drillStateStack?this._drillStateStack[this._drillStateStack.length-1]:null;};z.prototype._getVizFrame=function(){return this.getAggregation("_vizFrame");};z.prototype._getDataset=function(){var v=this._getVizFrame();return v?v.getDataset():null;};z.prototype._restoreUserSemanticColoringProperties=function(){this._oColoringsDataPointStyle={plotArea:{dataPointStyle:this._oDataPointStyle},legend:{title:this._oLegendtitle}};this._oColoringScale=null;};z.prototype._prepareData=function(){var o={},d;var i=this.getVisibleMeasures().some(function(m){return this.getMeasureByName(m).getSemantics()!==sap.chart.data.MeasureSemantics.Actual;}.bind(this));if(!i&&((this._sAdapteredChartType==="heatmap"&&this._oVizColorScale===undefined)||(this._sAdapteredChartType!=="heatmap"&&!this._oDataPointStyle))){o=this._getCandidateColoringSetting();d=o.contextHandler;}var j=[];if(d){j.push(d);this._loopContext(j);}if(i){this._oColoringsDataPointStyle=null;}else{if(o.ruleGenerator){var k;try{k=o.ruleGenerator();this._oColoringsDataPointStyle=k.properties;this._oColoringScale=k.colorScale;}catch(e){if(e instanceof x){e.display();}else{throw e;}this._restoreUserSemanticColoringProperties();}}else{this._restoreUserSemanticColoringProperties();}}};z.prototype._getContexts=function(){var o=this.getBinding("data");if(o){if(this._isEnablePaging()&&this._getPagingController().isUnderPaging()){return this._getPagingController().getCurrentContexts();}else{var i=0;var L=o instanceof sap.ui.model.analytics.AnalyticalBinding?o.getTotalSize():o.getLength();return o.getContexts(i,L);}}else{return[];}};z.prototype._loopContext=function(d){var e=this._getContexts();if(e.length>0&&!e.dataRequested){var i=this;e.forEach(function(o){d.forEach(function(j){j.call(i,o);});});}};z.prototype._bindingChangeListener=function(){var v=this._getVizFrame();v.invalidate();this.setBusy(false);if(this._isEnablePaging()){this._getPagingController().bindingChanged();}else{v._readyToRender(true);}try{this._prepareData();}catch(e){if(e instanceof x){e.display();}}var o=this._getEffectiveProperties();this._usingDisplayNameForSemantics(o);v.setVizProperties(o);this._setEffectiveScales();};z.prototype._enableSemanticPattern=function(){return!(this._oDataPointStyle||this._oSeriesStyle);};z.prototype._hasSemanticPattern=function(){return this._semanticTuples&&this._semanticTuples.length>0;};z.prototype._getContinuesSemanticTuples=function(){var d={};if(this._hasSemanticPattern()){d=this._semanticTuples.reduce(function(e,i){if(i.semanticMsrName){e[i.semanticMsrName]=i;}return e;},{});}return d;};z.prototype._getContinuesSemanticMap=function(){var d=[];if(this._hasSemanticPattern()){d=this._semanticTuples.filter(function(e){return e.projectedValueStartTime;});}return d;};z.prototype._getInternalVisibleMeasures=function(){var m=this._getVisibleMeasures();if(this._hasSemanticPattern()){m=m.concat(this._getContinuesSemanticMap().map(function(d){return d.semanticMsrName;}));}return m;};z.prototype._buildSelectedDataPoints=function(o,d){var m=this._getInternalVisibleMeasures(),e=this._getVisibleDimensions().concat(this.getInResultDimensions()),i=this._getEffectiveContinuesDataPoints(d);return S.buildSelectionVizCtx(m,e,o,i);};z.prototype._getEffectiveContinuesSeries=function(d){var e=d.slice(),i=this._getContinuesSemanticMap();if(this._hasSemanticPattern()){var m=e.map(function(j){return j.measures;});i.forEach(function(j){if(m.indexOf(j.actual)>-1||m.indexOf(j.projected)>-1){e=e.filter(function(k){return k.measures!==j.actual&&k.measures!==j.projected;});if(m.indexOf(j.actual)>-1&&m.indexOf(j.projected)>-1){e.push({measures:j.semanticMsrName});}}});}return e;};z.prototype._getEffectiveContinuesDataPoints=function(d){var e=d.slice(),k=this._getContinuesSemanticMap();if(this._hasSemanticPattern()){var m,p,o,v;for(var i=0;i<e.length;i++){o=e[i].measures;for(var j=0;j<k.length;j++){v=k[j];m=o.indexOf(v.actual);if(m>-1){o.splice(m,1);}p=o.indexOf(v.projected);if(p>-1){o.splice(p,1);}if(m>-1||p>-1){o.push(v.semanticMsrName);}}}}return e;};z.prototype._buildSelectEventData=function(d){if(d&&d.length>0&&this._hasSemanticPattern()){var v,e;var k=this._getContinuesSemanticMap();for(var i=0;i<d.length;i++){v=jQuery.extend(true,{},d[i].data);for(var j=0;j<k.length;j++){e=k[j];if(v.measureNames===e.semanticMsrName){if(v[e.timeAxis]<e.projectedValueStartTime){v.measureNames=e.actual;delete v[e.projected];delete v[e.semanticMsrName];}else{v.measureNames=e.projected;delete v[e.actual];delete v[e.semanticMsrName];}}else{if(v[e.actual]&&v.measureNames!==e.actual){delete v[e.actual];}if(v[e.projected]&&v.measureNames!==e.projected){delete v[e.projected];}}}d[i].data=v;}}};z.prototype.addData=function(){jQuery.sap.log.error('Chart manages the "data" aggregation only via data binding. The method "addData" therefore cannot be used programmatically!');};z.prototype.destroyData=function(){jQuery.sap.log.error('Chart manages the "data" aggregation only via data binding. The method "destroyData" therefore cannot be used programmatically!');};z.prototype.getData=function(){jQuery.sap.log.error('Chart manages the "data" aggregation only via data binding. The method "getData" therefore cannot be used programmatically!');};z.prototype.indexOfData=function(){jQuery.sap.log.error('Chart manages the "data" aggregation only via data binding. The method "indexOfData" therefore cannot be used programmatically!');};z.prototype.insertData=function(){jQuery.sap.log.error('Chart manages the "data" aggregation only via data binding. The method "insertData" therefore cannot be used programmatically!');};z.prototype.removeData=function(){jQuery.sap.log.error('Chart manages the "data" aggregation only via data binding. The method "removeData" therefore cannot be used programmatically!');};z.prototype.removeAllData=function(){jQuery.sap.log.error('Chart manages the "data" aggregation only via data binding. The method "removeAllData" therefore cannot be used programmatically!');};z.prototype._createOData4SAPAnalyticsModel=function(m){var o=null;try{o=new t.Model(new t.Model.ReferenceByModel(m));}catch(e){return undefined;}return o;};z.prototype.getIsAnalytical=function(){return this.getProperty("isAnalytical");};z.prototype.setIsAnalytical=function(v,d){if(this._bIsInitialized){jQuery.sap.log.error('The proeprty isAnalytical will programmatically set according to data source. The method "setIsAnalytical" therefore cannot be used!');}else{this.setProperty("isAnalytical",v,d);}};z.prototype._setIsAnalyticalProperty=function(o,d){var v=o.findQueryResultByName(h.getEntitySet(this.getIsAnalytical())(d))!==undefined;if(this.getIsAnalytical()!==v){this.setProperty("isAnalytical",v);}};z.prototype.bindAggregation=function(N,o){if(N==="data"){this._oBindingInfo=jQuery.extend(true,{},o);var m=this.getModel(o.model);var d;if(m){if(m instanceof sap.ui.model.json.JSONModel){if(this.getIsAnalytical()!==false){this.setProperty("isAnalytical",false);}else if(this.getEnablePagination()!==false){this.setProperty("enablePagination",false);}}else{d=this._createOData4SAPAnalyticsModel(m);this._setIsAnalyticalProperty(d,o);}if(this.getIsAnalytical()){if(o){var e=true;if(o.length!=undefined||this._isEnablePaging()){e=false;}o.parameters=jQuery.extend(true,{},{analyticalInfo:[{name:""}],useBatchRequests:true,provideGrandTotals:false,provideTotalsResultSize:false,autoexpand:false,reloadSingleUnitMeasures:true,noPaging:e},o.parameters);}O.apply(m);if(d){m.setAnalyticalExtensions(d);}}}}return B.prototype.bindAggregation.apply(this,arguments);};z.prototype._bindAggregation=function(N,o){if(N==="data"){var m=this.getModel(o.model);if(m){if(m instanceof sap.ui.model.json.JSONModel){if(this.getIsAnalytical()!==false){this.setProperty("isAnalytical",false);}else if(this.getEnablePagination()!==false){this.setProperty("enablePagination",false);}}else{var d=this._createOData4SAPAnalyticsModel(m);this._setIsAnalyticalProperty(d,o);}if(this.getIsAnalytical()){if(o){var e=true;if(o.length!=undefined||this._isEnablePaging()){e=false;}o.parameters=jQuery.extend(true,{},{analyticalInfo:[{name:""}],useBatchRequests:true,provideGrandTotals:false,provideTotalsResultSize:false,autoexpand:false,reloadSingleUnitMeasures:true,noPaging:e},o.parameters);}O.apply(m);if(d){m.setAnalyticalExtensions(d);}}this._deriveColumns(m,o);}this._getDataset().bindAggregation("data",o);this._invalidateBy({source:this,keys:{binding:true,vizFrame:true}});}else{B.prototype._bindAggregation.apply(this,arguments);}};z.prototype.unbindAggregation=function(N,d){if(N==="data"){var o=this._getDataset();if(o){o.unbindAggregation.apply(o,arguments);}d=true;}return B.prototype.unbindAggregation.apply(this,[N,d]);};z.prototype.unbindData=function(){if(!this.getIsAnalytical()){this.removeAllAggregation("dimensions");this.removeAllAggregation("measures");this.setProperty("visibleDimensions",[]);this.setProperty("inResultDimensions",[]);this.setProperty("visibleMeasures",[]);this._createDrillStack();}this.unbindAggregation("data");};z.prototype._deriveColumns=function(m,o){var d=this.getAggregation("dimensions");var e=this.getAggregation("measures");if((d===null||d.length===0)&&(e===null||e.length===0)){var i=h.deriveColumns(this.getIsAnalytical())(m,o);i.dimensions.forEach(this.addDimension.bind(this));i.measures.forEach(this.addMeasure.bind(this));}};z.prototype.onBeforeRendering=function(){B.prototype.onBeforeRendering.apply(this,arguments);var o=["onInvalidate","drillStack","dataSet","vizFrame","checkBinding","binding","loopData"];o.forEach(function(k){if(this._mNeedToUpdate[k]){this._updaters[k].call(this);}}.bind(this));jQuery.each(this._mNeedToUpdate,function(k){this._mNeedToUpdate[k]=false;}.bind(this));};z.prototype.onAfterRendering=function(){this._showLoading(this._bLoading);};z.prototype.onlocalizationChanged=function(){this._invalidateBy({source:this,keys:{vizFrame:true}});};z.prototype.exit=function(){this._getDataset().unbindAggregation('data',true);B.prototype.exit.apply(this,arguments);var v=this._getVizFrame();if(this._delegateEventHandlers){this._delegateEventHandlers.forEach(function(o){v["detach"+o.name](o.handler,this);delete o.handler;},this);delete this._delegateEventHandlers;}v.detachRenderComplete(this._vizFrameRenderCompleteHandler,this);};z.prototype.applySettings=function(){this._oDataPointStyle=null;this._oSeriesStyle=null;sap.ui.core.Control.prototype.applySettings.apply(this,arguments);var d=new F();d.attachEvent("dataChange",{},this._bindingChangeListener,this);var i=jQuery.extend(true,{},{'applicationSet':'fiori'},this.getUiConfig());this.setUiConfig(i);this._bNeedToApplyDefaultProperties=true;var v=new V({width:A(this.getWidth()),height:A(this.getHeight()),vizType:this.getChartType(),uiConfig:this.getUiConfig(),vizProperties:jQuery.extend(true,{'title':{'visible':false}},this._getEffectiveProperties())});v.setDataset(d);v.attachRenderComplete(null,this._updateLoadingIndicator.bind(this));this._rendered=false;v.attachEventOnce("renderComplete",function(){this._rendered=true;},this);v.attachEvent("renderFail",null,function(e){this._showLoading(false);},this);v._readyToRender(false);this.setAggregation("_vizFrame",v);this._delegateEvents();this._sAdapteredChartType=this.getChartType();this._bIsInitialized=true;this._oCandidateColoringSetting={};this._oDataPointStyle=null;this._oLegendtitle=null;this._oColoringStatus={};this._mNeedToUpdate={};if(this._isEnablePaging()){this._getPagingController();}};z.prototype.setCustomMessages=function(o){this.setProperty("customMessages",o);var v=this._getVizFrame();if(v){v._setCustomMessages(o);}return this;};z.prototype.resetLayout=function(){this._invalidateBy({source:this,keys:{binding:true,vizFrame:true,drillStack:true,dataSet:true}});return this;};z.prototype.setSelectedDataPoints=function(d){if(this.getSelectionMode()!==y.None){var o=this.getBinding("data"),v=this._getVizFrame();if(!o||!v||this.getSelectionBehavior().toUpperCase()!=="DATAPOINT"){return this;}v.vizSelection([],{clearSelection:true});v.vizSelection(this._buildSelectedDataPoints(o,d),{selectionMode:this.getSelectionMode()});}return this;};z.prototype.addSelectedDataPoints=function(d){if(this.getSelectionMode()!==y.None){var o=this.getBinding("data"),v=this._getVizFrame();if(!o||!v||this.getSelectionBehavior().toUpperCase()!=="DATAPOINT"){return this;}v.vizSelection(this._buildSelectedDataPoints(o,d),{selectionMode:y.Multi});}return this;};z.prototype.getSelectedDataPoints=function(){var v=this._getVizFrame();if(!v||this.getSelectionBehavior().toUpperCase()!=="DATAPOINT"){return{count:0,dataPoints:[]};}var o=this._getContinuesSemanticTuples();var m=this._getVisibleMeasures(),d=this._getDataset(),e=v.vizSelection(),j={};for(var i=0,k=e.length;i<k;i++){var p=e[i],L=p.data._context_row_number;if(!j[L]){j[L]={index:L,measures:[],context:d.findContext({"_context_row_number":L})};}p.measures=S.filterVisibleMsr(p.data,m);if(!jQuery.isEmptyObject(o)){S.filterSemMsr(o,m,p);}j[L].measures=j[L].measures.concat(p.measures);if(p.unit){j[L].unit=jQuery.extend(true,j[L].unit,p.unit);}if(p.dataName){j[L].dataName=jQuery.extend(true,j[L].dataName,p.dataName);}}return{count:e.length,dataPoints:Object.keys(j).map(function(N){return j[N];})};};z.prototype.removeSelectedDataPoints=function(d){if(this.getSelectionMode()!==y.None){var o=this.getBinding("data"),v=this._getVizFrame();if(!v||this.getSelectionBehavior().toUpperCase()!=="DATAPOINT"){return this;}var e=this._buildSelectedDataPoints(o,d);v.vizSelection(e,{deselection:true});}return this;};z.prototype.setSelectedCategories=function(d){if(this.getSelectionMode()!==y.None){var v=this._getVizFrame(),e=this.getSelectionBehavior().toUpperCase();if(!v||e!=="CATEGORY"){return this;}v.vizSelection([],{clearSelection:true});v.vizSelection(d.map(S.toVizCSCtx),{selectionMode:this.getSelectionMode()});}return this;};z.prototype.addSelectedCategories=function(d){if(this.getSelectionMode()!==y.None){var v=this._getVizFrame(),e=this.getSelectionBehavior().toUpperCase();if(!v||e!=="CATEGORY"){return this;}v.vizSelection(d.map(S.toVizCSCtx),{selectionMode:y.Multi});}return this;};z.prototype.removeSelectedCategories=function(d){if(this.getSelectionMode()!==y.None){var v=this._getVizFrame(),e=this.getSelectionBehavior().toUpperCase();if(!v||e!=="CATEGORY"){return this;}v.vizSelection(d.map(S.toVizCSCtx),{deselection:true});}return this;};z.prototype.getSelectedCategories=function(){var v=this._getVizFrame(),d=this.getSelectionBehavior().toUpperCase();if(!v||d!=="CATEGORY"){return{count:0,categories:[]};}else{var e=v.vizSelection();return{count:e.length,categories:(e.category||[]).map(S.fromVizCSCtx)};}};z.prototype.setSelectedSeries=function(d){if(this.getSelectionMode()!==y.None){var v=this._getVizFrame(),e=this.getSelectionBehavior().toUpperCase();if(!v||e!=="SERIES"){return this;}v.vizSelection([],{clearSelection:true});var i=this._getEffectiveContinuesSeries(d);v.vizSelection(i.map(S.toVizCSCtx),{selectionMode:this.getSelectionMode()});}return this;};z.prototype.addSelectedSeries=function(d){if(this.getSelectionMode()!==y.None){var v=this._getVizFrame(),e=this.getSelectionBehavior().toUpperCase();if(!v||e!=="SERIES"){return this;}var i=this._getEffectiveContinuesSeries(d);v.vizSelection(i.map(S.toVizCSCtx),{selectionMode:y.Multi});}return this;};z.prototype.removeSelectedSeries=function(d){if(this.getSelectionMode()!==y.None){var v=this._getVizFrame(),e=this.getSelectionBehavior().toUpperCase();if(!v||e!=="SERIES"){return this;}var i=this._getEffectiveContinuesSeries(d);v.vizSelection(i.map(S.toVizCSCtx),{deselection:true});}return this;};z.prototype.getSelectedSeries=function(){var v=this._getVizFrame(),d=this.getSelectionBehavior().toUpperCase();if(!v||d!=="SERIES"){return{count:0,series:[]};}else{var e=v.vizSelection(),i=(e.series||[]).map(S.fromVizCSCtx),j=[],k=this._getContinuesSemanticTuples();i=i.filter(function(m){var o=true;if(m&&m.measures){var p=k[m.measures];if(p&&p.semanticMsrName===m.measures){j.push({measures:p.actual});j.push({measures:p.projected});o=false;}}return o;});i=i.concat(j);return{count:e.length,series:i};}};z.prototype.drillDown=function(d){if(this.getIsAnalytical()===false){jQuery.sap.log.error('Data source does not support drillDown/drillUp. The method "drillDown" therefore cannot be used!');return;}if(d&&!(d instanceof Array)){d=[d];}var e=this._normalizeDorM(d,true);if(e.length===0){return;}if(!this._checkDrilldownValid(e)){jQuery.sap.log.warning("Drill down not possible for "+e+". Already drilled down.");return;}var o=this._getDrillStateTop(),m=this._redundantsFromSelection(),i=this._deriveFilterFromSelection();var N;if(i){N=!(o&&o.filter)?i:new r([i,o.filter],true);}this._drillStateStack.push({dimensions:o.dimensions.slice().concat(e.map(function(k){return k.getName();})).filter(function(k){return!m[k];}),measures:o.measures.filter(function(k){return!m.measureNames[k];}),filter:N,redundant:m});var j=e.map(function(k){return k.getName();});this.fireDrilledDown({dimensions:j});this._invalidateBy({source:this,keys:{binding:true,vizFrame:true}});};z.prototype.drillUp=function(i){if(this.getIsAnalytical()===false){jQuery.sap.log.error('Data source does not support drillDown/drillUp. The method "drillUp" therefore cannot be used!');return;}if(arguments.length===0){i=this._drillStateStack.length-2;}var N=this._drillStateStack[i];if(N&&i!=this._drillStateStack.length-1){var p=this._drillStateStack.pop();this._drillStateStack.splice(i+1);this.fireDrilledUp({dimensions:p.dimensions.filter(function(d){return N.dimensions.indexOf(d)===-1;})});this._invalidateBy({source:this,keys:{binding:true,vizFrame:true}});}};z.prototype.getDrillStack=function(){if(this.getIsAnalytical()===false){jQuery.sap.log.error('Data source does not support drillDown/drillUp. The method "getDrillStack" therefore cannot be used!');return;}return jQuery.map(this._drillStateStack||[],function(o,i){return{dimension:o.dimensions.slice(),measure:o.measures.slice(),filter:o.filter};});};z.prototype.setUiConfig=function(U){this.setProperty("uiConfig",U);if(this._getVizFrame()){this._getVizFrame().setUiConfig(U);}};var E=(function(){var d=["interaction.selectability.mode","interaction.selectability.behavior"];function e(o,p){var j=o,v;v=p.reduce(function(m,L){if(j.hasOwnProperty(L)){m.push({parent:j,val:j[L],key:L});j=j[L];}return m;},[]);if(v.length!==p.length){return;}var k=v.pop();delete k.parent[k.key];while(v.length>0){k=v.pop();if(Object.keys(k.val).length>0){return;}else{delete k.parent[k.key];}}}function i(v,j){var o=jQuery.extend(true,{},v);d.forEach(function(p){delete o[p];e(o,p.split("."));});return o;}return{sanitize:i,modify:function(p,k,j){var m=k.split("."),N=p;while(m.length>1&&N.hasOwnProperty(m[0])){N=N[m.shift()];}var o=m[0];if(m.length===1&&N.hasOwnProperty(o)){N[o]=j(N[o]);}}};})();z.prototype.setVizProperties=function(v){v=E.sanitize(v);this.setProperty("vizProperties",v);this._oLegendtitle=v.legend?v.legend.title:null;if(v.plotArea){if(v.plotArea.dataPointStyle){this._oDataPointStyle=v.plotArea.dataPointStyle;this._invalidateBy({source:this,keys:{loopData:true}});}if(v.plotArea.seriesStyle){this._oSeriesStyle=v.plotArea.seriesStyle;}}if(this._getVizFrame()){this._getVizFrame().setVizProperties(this._getEffectiveProperties());}};z.prototype.getVizProperties=function(){var o=this._getVizFrame();var d=E.sanitize(o?o.getVizProperties():this.getProperty("vizProperties"));function e(i){var j=sap.viz.api.env.Format.numericFormatter();if(!j||jQuery.type(j.stripUnit)!=="function"){return i;}if(jQuery.type(i)==="string"){return j.stripUnit(i);}else if(jQuery.type(i)==="object"){jQuery.each(i,function(k,v){i[k]=j.stripUnit(v);});return i;}else{return i;}}E.modify(d,"plotArea.dataLabel.formatString",e);E.modify(d,"tooltip.formatString",e);return d;};z.prototype.setVizScales=function(v){this.setProperty("vizScales",v);this._oVizColorScale=v.filter(function(o){return o.feed==="color";})[0];if(this._getVizFrame()){this._getVizFrame().setVizScales(v);}};z.prototype.getVizScales=function(){var v=this._getVizFrame();return v?v.getVizScales():this.getProperty("vizScales");};z.prototype.getVizUid=function(){return this._getVizFrame().getVizUid();};z.prototype.zoom=function(o){this._getVizFrame().zoom(o);};var G=["selectData","deselectData"];z.prototype._delegateEvents=function(){if(this._delegateEventHandlers){return;}var v=this._getVizFrame();this._delegateEventHandlers=G.map(function(e){var N=e.charAt(0).toUpperCase()+e.slice(1);var d=function(o){var p=o.getParameters();this._buildSelectEventData(p.data);delete p.id;this.fireEvent(e,p);};d=d.bind(this);v["attach"+N](null,d);return{name:N,handler:d};},this);this._vizFrameRenderCompleteHandler=K.bind(this);v.attachRenderComplete(null,this._vizFrameRenderCompleteHandler);};z.getChartTypes=sap.chart.api.getChartTypes;z.prototype.getAvailableChartTypes=function(){var d=this._getVisibleDimensions(true),m=this._getVisibleMeasures(true);return C.CONFIG.chartTypes.reduce(function(o,e){var i=R.compatible(e,d,m);if(i.compatible){o.available.push({chart:e});}else{var j={};if(i.error.missing.dim){j.Dimension=i.error.missing.dim;}if(i.error.missing.time){j.DateTimeDimension=i.error.missing.time;}if(i.error.missing.msr){j.Measure=i.error.missing.msr;}o.unavailable.push({chart:e,error:j});}return o;},{available:[],unavailable:[]});};z.prototype._getEffectiveProperties=function(){var v={};if(this._bNeedToApplyDefaultProperties){v=jQuery.extend(true,v,this._getDefaultVizProperties());this._bNeedToApplyDefaultProperties=false;}v=jQuery.extend(true,v,n.getSemanticVizProperties(this._sAdapteredChartType,this._semanticTuples),this._oColoringsDataPointStyle,this.getProperty("vizProperties"),this._getHostedVizProperties(),this._getPagingVizProperties(),this._getTimeProperties());return v;};z.prototype._setEffectiveScales=function(){var v=this._getVizFrame();if(this._oColoringScale){v.setVizScales([this._oColoringScale]);}};z.prototype._usingDisplayNameForSemantics=function(v){var d=function(o){if((typeof(o)==='undefined')||(o===null)){return false;}return true;};if(v.plotArea&&v.plotArea.dataPointStyle&&v.plotArea.dataPointStyle.rules){var e=this._getContexts();if(e.length>0&&!e.hasOwnProperty("dataRequested")){var k=this.getVisibleDimensions(),m=v.plotArea.dataPointStyle.rules;for(var i=0;i<m.length;i++){var p=m[i].dataContext;if(p&&p.length!==0){var L=Object.keys(p);if(!d(m[i].displayName)&&L.length===1){var N=L[0];if(p[N].hasOwnProperty("equal")&&k.indexOf(N)!==-1){var Q=this.getDimensionByName(N).getTextProperty();for(var j=0;j<e.length;j++){if(e[j].getProperty(N)===p[N].equal){var U=e[j].getProperty(Q);if(!d(Q)||!d(U)||typeof(U)==="object"||this.getDimensionByName(N).getDisplayText()===false){m[i].displayName=p[N].equal;break;}else{m[i].displayName=U;break;}}}}}}}}}};z.prototype._getCandidateColoringSetting=function(){if(!this._bColoringParsed){this._bColoringParsed=true;this._oCandidateColoringSetting={};var o=this.getColorings();var d=this.getActiveColoring();var m=this._normalizeDorM(this.getVisibleMeasures());var i=this._normalizeDorM(this.getVisibleDimensions(),true);var j=this._normalizeDorM(this.getInResultDimensions(),true);if(o){try{var U=jQuery.sap.getResourcePath("sap/chart/i18n/i18n.properties");var k=jQuery.sap.resources({url:U});this._oCandidateColoringSetting=w.getCandidateSetting(o,d,m,i,j,this._oColoringStatus||{},this.getChartType(),k);}catch(e){if(e instanceof x){e.display();}else{throw e;}}}}return this._oCandidateColoringSetting;};z.prototype._hostedVizProperties={selectionMode:{prop:"interaction.selectability.mode"},selectionBehavior:{prop:"interaction.selectability.behavior"}};z.prototype._getHostedVizProperties=function(){return Object.keys(this._hostedVizProperties).reduce(function(o,p){var d=this._hostedVizProperties[p].prop.split(".").reverse().reduce(function(o,e){var i={};i[e]=o;return i;},this.getProperty(p));return jQuery.extend(true,o,d);}.bind(this),{});};var H="__UI5__ShortIntegerMaxFraction10";var I="__UI5__FloatMaxFraction2";var J="__UI5__ShortIntegerMaxFraction2";z.prototype._getDefaultVizProperties=function(){var d='info/'+(this._sAdapteredChartType||this.getChartType());var i=(d.indexOf("info/100_")===0);var j=(d==="info/pie"||d==="info/donut");var o={interaction:{extraEventInfo:true}};return jQuery.extend(true,o,v({},d,["valueAxis.label.formatString","valueAxis2.label.formatString"],i?'':H),v({},d,["legend.formatString","sizeLegend.formatString"],J),v({},d,["plotArea.dataLabel.formatString"],j?'':J),v({},d,["tooltip.formatString"],i?'':I));function k(e,L,N){if(L.length===0){return N;}e=e||{};var p=e[L[0]];e[L[0]]=k(p,L.slice(1),N);return e;}function m(p,L){if(p==null||L.legnth===0){return p;}var e=p[L[0]];if(e&&e.children){return m(e.children,L.slice(1));}return e;}function v(e,L,N,Q){var U=sap.viz.api.metadata.Viz.get(L);if(U){var W=U.properties;N.forEach(function(X){X=X.split(".");var p=m(W,X);if(p&&p.hasOwnProperty("defaultValue")){k(e,X,Q);}});}return e;}};z.prototype._getPagingVizProperties=function(){if(this._isEnablePaging()){var p={interaction:{zoom:{enablement:false},selectability:{mode:"NONE"}},plotArea:{isFixedDataPointSize:true}};return p;}else{return{};}};z.prototype._getTimeProperties=function(){var d=["year","month","day"];var o=null;var e=this;var i=this.getVisibleDimensions().filter(function(m){var v=e.getDimensionByName(m);return(v instanceof sap.chart.data.TimeDimension&&v._getFixedRole()==="category");})[0];if(i){var j=this.getDimensionByName(i);switch(j.getTimeUnit()){case u.yearmonthday:d=["year","month","day"];break;case u.yearquarter:d=["year","quarter"];break;case u.yearmonth:d=["year","month"];break;case u.fiscalyear:d=["fiscal_year"];break;case u.fiscalyearperiod:d=["fiscal_period","fiscal_year"];break;default:}o=j.getFiscalYearPeriodCount();}var p=this.getProperty("vizProperties");if(p&&p.timeAxis){var k=p.timeAxis;if(k.levels){d=k.levels;}if(k.fiscal&&k.fiscal.periodNumbers){o=k.fiscal.periodNumbers;}}return{"timeAxis":{"levels":d,"fiscal":{"periodNumbers":o}}};};z.prototype.setSelectionMode=function(v){this.setProperty("selectionMode",v);var o=this._getVizFrame();if(o){o.setVizProperties({interaction:{selectability:{mode:v}}});}return this;};z.prototype.getSelectionMode=function(){var v=this._getVizFrame();if(v){return v.getVizProperties().interaction.selectability.mode;}else{return this.getProperty("selectionMode");}};z.prototype.setSelectionBehavior=function(v){this.setProperty("selectionBehavior",v);var o=this._getVizFrame();if(o){o.setVizProperties({interaction:{selectability:{behavior:v}}});}return this;};z.prototype.getSelectionBehavior=function(){var v=this._getVizFrame();if(v){return v.getVizProperties().interaction.selectability.behavior;}else{return this.getProperty("selectionBehavior");}};z.prototype.getDimensionByName=function(N){return this.getDimensions().filter(function(d){return d.getName()===N;})[0];};z.prototype.getMeasureByName=function(N){return this.getMeasures().filter(function(m){return m.getName()===N;})[0];};z.prototype.getTimeDimensions=function(){return this.getDimensions().filter(function(d){return d instanceof T;});};z.prototype._isEnablePaging=function(){this._bMobile=sap.ui.Device.system.tablet||sap.ui.Device.system.phone;var d=this.getEnablePagination()&&this._bIsPagingChartType&&!this._bMobile;return d;};function K(e){var p=e.getParameters();delete p.id;if(this._isEnablePaging()){this._getPagingController().vizFrameRenderCompleted();}this.fireEvent("renderComplete",p);}z.prototype._showLoading=function(L){var $=this.$();if(!$){return;}if(!L){if(this._$loadingIndicator){this._$loadingIndicator.remove();}}else{if(!this._$loadingIndicator){this._$loadingIndicator=this._createLoadingIndicator();}this._updateLoadingIndicator();$.append(this._$loadingIndicator);}this._bLoading=L;};z.prototype._createLoadingIndicator=function(){var $=jQuery(sap.ui.core.BusyIndicatorUtils.getElement());var d=jQuery("<p>").attr("class","loading-text").text("Loading");d.css({"position":"absolute","transform":"translateY(-3em)","width":"100%","text-align":"center"});d.insertBefore($.children()[0]);$.css({opacity:1});return $;};z.prototype._updateLoadingIndicator=function(){var $=this.$();if(!$||!this._$loadingIndicator){return;}var d=this._sAdapteredChartType,e=d==="bar"||d.indexOf("horizontal")!==-1;var i=$.find(".v-plot-bound"),o=$.offset(),p={top:o.top,left:o.left,width:$.width(),height:$.height()};if(i.length){var j=i.offset(),k=i[0].getBoundingClientRect();p.top=j.top-1;p.left=j.left;p.width=k.width+1;if(e){p.height=Math.ceil(k.height+1);}else{p.height=Math.floor(k.height+1);}}this._$loadingIndicator.css(p);var m=this._$loadingIndicator.find(".loading-text");m.css({"top":p.height/2,"font-weight":sap.ui.core.theming.Parameters.get("sapUiChartTitleFontWeight"),"font-size":sap.ui.core.theming.Parameters.get("sapUiChartMainTitleFontSize"),"color":sap.ui.core.theming.Parameters.get("sapUiChartMainTitleFontSize")});this._$loadingIndicator.css({"background-color":sap.ui.core.theming.Parameters.get("sapUiExtraLightBG")});};z.prototype._getRequiredDimensions=function(){var v=this._getVisibleDimensions(),i=this.getInResultDimensions();return this._normalizeDorM(v.concat(i),true);};z.prototype._getRequiredMeasures=function(){return this._getVisibleMeasures(true);};z.prototype.exportToSVGString=function(o){var d="<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"100%\" height=\"100%\"/>",v=this._getVizFrame();if(v){d=v.exportToSVGString(o);}return d;};z.prototype._getPagingController=function(){if(!this._pagingController){this._pagingController=new P(this);}return this._pagingController;};return z;});
